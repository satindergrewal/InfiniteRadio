<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 920 620" font-family="-apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif">
  <defs>
    <filter id="glow">
      <feGaussianBlur stdDeviation="3" result="blur"/>
      <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
    </filter>
    <linearGradient id="purpleGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#7c3aed"/>
      <stop offset="100%" stop-color="#a78bfa"/>
    </linearGradient>
    <linearGradient id="greenGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#059669"/>
      <stop offset="100%" stop-color="#34d399"/>
    </linearGradient>
  </defs>

  <!-- Background -->
  <rect width="920" height="620" rx="12" fill="#0d1117"/>

  <!-- Title -->
  <text x="460" y="38" text-anchor="middle" fill="#e6edf3" font-size="18" font-weight="600" letter-spacing="0.1em">SYSTEM ARCHITECTURE</text>

  <!-- Docker Compose boundary -->
  <rect x="30" y="55" width="860" height="530" rx="10" fill="none" stroke="#30363d" stroke-width="1.5" stroke-dasharray="8,4"/>
  <text x="50" y="78" fill="#484f58" font-size="11" letter-spacing="0.05em">DOCKER COMPOSE</text>

  <!-- Browser/VLC (external) -->
  <rect x="340" y="4" width="240" height="36" rx="8" fill="#161b22" stroke="#30363d" stroke-width="1"/>
  <text x="460" y="27" text-anchor="middle" fill="#a78bfa" font-size="12" font-weight="500">Browser / VLC / mpv</text>

  <!-- Arrow from browser to radio -->
  <line x1="460" y1="40" x2="460" y2="95" stroke="#7c3aed" stroke-width="1.5" marker-end="url(#arrowPurple)"/>
  <text x="475" y="72" fill="#484f58" font-size="10">HTTP / WebRTC</text>

  <!-- Radio container -->
  <rect x="50" y="95" width="820" height="310" rx="8" fill="#161b22" stroke="url(#purpleGrad)" stroke-width="1.5"/>
  <text x="70" y="120" fill="#a78bfa" font-size="13" font-weight="600">radio</text>
  <text x="155" y="120" fill="#484f58" font-size="11">Go binary, CPU container, :8080</text>

  <!-- Web UI box -->
  <rect x="70" y="135" width="140" height="50" rx="6" fill="#1c1230" stroke="#7c3aed" stroke-width="1"/>
  <text x="140" y="158" text-anchor="middle" fill="#e6edf3" font-size="11" font-weight="500">Web UI</text>
  <text x="140" y="173" text-anchor="middle" fill="#484f58" font-size="9">go:embed HTML</text>

  <!-- REST API box -->
  <rect x="230" y="135" width="140" height="50" rx="6" fill="#1c1230" stroke="#7c3aed" stroke-width="1"/>
  <text x="300" y="158" text-anchor="middle" fill="#e6edf3" font-size="11" font-weight="500">REST API</text>
  <text x="300" y="173" text-anchor="middle" fill="#484f58" font-size="9">/api/status, genre, skip</text>

  <!-- Auto-DJ box -->
  <rect x="70" y="205" width="200" height="70" rx="6" fill="#1a1a2e" stroke="#5b21b6" stroke-width="1"/>
  <text x="170" y="228" text-anchor="middle" fill="#e6edf3" font-size="12" font-weight="500">Auto-DJ</text>
  <text x="170" y="245" text-anchor="middle" fill="#a78bfa" font-size="10">Mood Graph</text>
  <text x="170" y="260" text-anchor="middle" fill="#484f58" font-size="9">14 genres, dwell timing</text>

  <!-- Audio Pipeline box -->
  <rect x="290" y="205" width="200" height="70" rx="6" fill="#1a1a2e" stroke="#5b21b6" stroke-width="1"/>
  <text x="390" y="228" text-anchor="middle" fill="#e6edf3" font-size="12" font-weight="500">Audio Pipeline</text>
  <text x="390" y="245" text-anchor="middle" fill="#a78bfa" font-size="10">Decode + Crossfade</text>
  <text x="390" y="260" text-anchor="middle" fill="#484f58" font-size="9">20ms frames, master clock</text>

  <!-- Broadcaster box -->
  <rect x="510" y="205" width="160" height="70" rx="6" fill="#1a1a2e" stroke="#5b21b6" stroke-width="1"/>
  <text x="590" y="228" text-anchor="middle" fill="#e6edf3" font-size="12" font-weight="500">Broadcaster</text>
  <text x="590" y="245" text-anchor="middle" fill="#a78bfa" font-size="10">Fan-out</text>
  <text x="590" y="260" text-anchor="middle" fill="#484f58" font-size="9">1 source -> N listeners</text>

  <!-- HTTP Stream box -->
  <rect x="690" y="145" width="160" height="50" rx="6" fill="#0f2818" stroke="#059669" stroke-width="1"/>
  <text x="770" y="166" text-anchor="middle" fill="#e6edf3" font-size="11" font-weight="500">HTTP Stream</text>
  <text x="770" y="180" text-anchor="middle" fill="#34d399" font-size="9">MP3, chunked, /stream</text>

  <!-- WebRTC box -->
  <rect x="690" y="210" width="160" height="50" rx="6" fill="#0f2818" stroke="#059669" stroke-width="1"/>
  <text x="770" y="231" text-anchor="middle" fill="#e6edf3" font-size="11" font-weight="500">WebRTC Stream</text>
  <text x="770" y="245" text-anchor="middle" fill="#34d399" font-size="9">Opus, Pion, /offer</text>

  <!-- Arrows: Auto-DJ -> Pipeline -> Broadcaster -> Streams -->
  <line x1="270" y1="240" x2="290" y2="240" stroke="#7c3aed" stroke-width="1.2"/>
  <line x1="490" y1="240" x2="510" y2="240" stroke="#7c3aed" stroke-width="1.2"/>
  <line x1="670" y1="230" x2="690" y2="170" stroke="#059669" stroke-width="1.2"/>
  <line x1="670" y1="240" x2="690" y2="235" stroke="#059669" stroke-width="1.2"/>

  <!-- ACE-Step Client box -->
  <rect x="70" y="300" width="200" height="50" rx="6" fill="#1a1a2e" stroke="#5b21b6" stroke-width="1"/>
  <text x="170" y="322" text-anchor="middle" fill="#e6edf3" font-size="11" font-weight="500">ACE-Step Client</text>
  <text x="170" y="338" text-anchor="middle" fill="#484f58" font-size="9">submit / poll / read file</text>

  <!-- Arrow: Auto-DJ -> ACE-Step Client -->
  <line x1="170" y1="275" x2="170" y2="300" stroke="#7c3aed" stroke-width="1.2" stroke-dasharray="4,3"/>

  <!-- Config box -->
  <rect x="290" y="300" width="160" height="50" rx="6" fill="#161b22" stroke="#30363d" stroke-width="1"/>
  <text x="370" y="322" text-anchor="middle" fill="#e6edf3" font-size="11" font-weight="500">Config</text>
  <text x="370" y="338" text-anchor="middle" fill="#484f58" font-size="9">env vars, sane defaults</text>

  <!-- Shared volume -->
  <rect x="550" y="410" width="310" height="45" rx="22" fill="#1a1520" stroke="#7c3aed" stroke-width="1" stroke-dasharray="6,3"/>
  <text x="705" y="437" text-anchor="middle" fill="#a78bfa" font-size="11" font-weight="500">Shared Volume: acestep-outputs</text>

  <!-- ACE-Step container -->
  <rect x="50" y="475" width="820" height="95" rx="8" fill="#161b22" stroke="url(#greenGrad)" stroke-width="1.5"/>
  <text x="70" y="500" fill="#34d399" font-size="13" font-weight="600">acestep</text>
  <text x="155" y="500" fill="#484f58" font-size="11">Python, GPU container, :8000</text>

  <!-- ACE-Step internals -->
  <rect x="70" y="512" width="260" height="42" rx="6" fill="#0f2818" stroke="#059669" stroke-width="1"/>
  <text x="200" y="532" text-anchor="middle" fill="#e6edf3" font-size="12" font-weight="500">ACE-Step v1.5 FastAPI</text>
  <text x="200" y="546" text-anchor="middle" fill="#484f58" font-size="9">Music generation, turbo mode (8 steps)</text>

  <!-- GPU badge -->
  <rect x="360" y="515" width="70" height="28" rx="14" fill="#7c3aed"/>
  <text x="395" y="534" text-anchor="middle" fill="#fff" font-size="11" font-weight="600">GPU</text>

  <!-- Generates to volume -->
  <rect x="460" y="512" width="200" height="42" rx="6" fill="#1a1520" stroke="#5b21b6" stroke-width="1"/>
  <text x="560" y="532" text-anchor="middle" fill="#e6edf3" font-size="11" font-weight="500">MP3 Output</text>
  <text x="560" y="546" text-anchor="middle" fill="#484f58" font-size="9">48kHz stereo, 3-min tracks</text>

  <!-- Arrows: ACE-Step Client <-> ACE-Step API -->
  <line x1="170" y1="350" x2="170" y2="475" stroke="#a78bfa" stroke-width="1.2" stroke-dasharray="4,3"/>
  <text x="180" y="395" fill="#484f58" font-size="9">HTTP API</text>

  <!-- Arrow: ACE-Step -> Volume -->
  <line x1="560" y1="512" x2="660" y2="455" stroke="#7c3aed" stroke-width="1.2" stroke-dasharray="4,3"/>

  <!-- Arrow: Volume -> Pipeline -->
  <line x1="620" y1="410" x2="420" y2="275" stroke="#7c3aed" stroke-width="1.2" stroke-dasharray="4,3"/>
  <text x="530" y="360" fill="#484f58" font-size="9">read files</text>
</svg>
